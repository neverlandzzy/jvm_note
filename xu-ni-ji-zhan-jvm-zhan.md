# 虚拟机栈\(JVM栈\)

## 虚拟机栈概述

由于跨平台性的设计，Java的指令都是根据栈来设计的。不同平台CPU架构不同，因此不能设计为基于寄存器的指令。相比于基于寄存器的指令，**优点是跨平台，指令集小，编译器容易实现。缺点是性能下降，实现同样的功能需要更多的指令**。

**栈是运行时的单位，堆是存储的单位。**栈解决程序的运行问题，即程序如何执行；堆解决数据存储问题，即数据怎么存、存在哪。

每个线程在创建时都会创建一个虚拟机栈，其内部保存一个个的栈帧\(Stacjk Frame\)，**一个栈帧对应一个Java方法**。JVM栈是线程私有的，生命周期和线程一致。主管Java程序的运行，它保存方法的局部变量、部分结果，并参与方法的调用和返回。

* 栈中保存的局部变量包括**8种基本数据类型**和**对象的引用地址**
* 对象本身保存在堆空间
* 变量可以分为基本数据变量和引用类型变量（类、数组、接口）

**栈的优点**

* 栈是一种快速有效的分配存储方式，访问速度仅次于程序计数器
* 栈的操作只有进栈和出栈 - 每个方法执行伴随着进栈，方法执行结束后出栈
* 栈不存在垃圾回收\(GC\)的问题，但可能存在栈溢出\(OOM\)（程序计数器既不存在GC也不存在OOM）

