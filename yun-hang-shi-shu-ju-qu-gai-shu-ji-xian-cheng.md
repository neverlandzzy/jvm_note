# 运行时数据区概述及线程

## 概述

JVM定义了若干种程序运行期间会使用到的运行时数据区，其中一些会随着虚拟机启动而创建，随着虚拟机退出而销毁，一个虚拟机对应一个进程。另外一些则是与线程一一对应的，这些与线程对应的数据区会随着线程的开始和结束而创建和销毁。

* 每个线程包括：程序计数器、栈、本地栈
* 线程间共享：堆，堆外内存（永久代或元空间、代码缓存）

每个JVM实例对应一个Runtime实例\(instance of class Runtime\)，即为运行时环境。

![](.gitbook/assets/image%20%283%29.png)

## 线程

线程是一个程序里的运行单元，JVM允许一个应用有多个线程并行的执行。

在Hotspot JVM里，每个线程都与操作系统的本地线程直接映射 - 当一个Java线程准备好执行后，一个操作系统的本地线程也同时创建。Java线程执行终止以后，本地线程也会回收。

操作系统负责将所有线程的安排调度到任何一个可用的CPU上。一旦本地线程初始化成功，它就会调用Java线程中的run\(\)方法。

